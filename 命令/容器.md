## 容器

### 相关命令

#### 给运行中的容器添加映射端口

- 方法一

  - 获得容器IP

    ```java
    docker inspect rabbitmq | grep IPAddress
    ```

  - iptable转发端口

    ```java
    iptables -t nat -A DOCKER -p tcp --dport 8001 -j DNAT --to-destination 172.17.0.19:8000
    ```

  - 弊端-方法一无法通过如下命令查看到容器开放的对应端口

    ```java
    docker port rabbitmq
    ```

- 方法二

  - 提交一个运行中的容器为镜像

    ```java
    docker commit -a "<container_name>" -m "<a new image>" web  aaa:v1
    ```

  - 运行镜像并添加端口

    ```java
    docker run -it --name web_demo -p 8000:80 aaa:v1 /bin/bash
    ```

#### 查看容器开放的端口

```java
docker port rabbitmq
```

#### 修改容器的启动方式

```java
docker container update --restart=always $ContainerName
```

